# Active Context

## Current Focus

The project is in its initial development phase, establishing core functionality for:

1. Game State Management

   - Basic tavern simulation mechanics
   - Comprehensive financial system implementation
     - Beer inventory management (purchase/sell)
     - Price adjustment system
     - Event-based financial impacts
   - Time progression handling

2. AI Integration

   - Patron generation system
   - Event creation pipeline
   - Dynamic narrative generation

3. Frontend Development

   - Real-time updates via Hotwire
   - Basic game interface
   - Patron and event displays

## Recent Changes

Recent developments include:

1. Financial System Implementation
   - Added financial impact tracking to events
   - Implemented FinancialService for tavern operations
   - Added beer inventory and pricing management
2. Database Updates
   - Added credits_change and financial_reason to events
   - Enhanced financial tracking capabilities

Previous changes:

1. Core Models

   - Game structure
   - Patron system
   - Event tracking
   - Message handling

2. Service Architecture

   - GPT integration services
   - Game logic services
   - Event and patron management

3. Frontend Framework

   - Hotwire/Turbo implementation
   - Tailwind CSS setup
   - Basic view templates

## Next Steps

1. Immediate Priorities

   - Complete core game loop implementation
   - Enhance AI-driven event generation
   - Implement basic financial systems

2. Technical Tasks

   - Refine GPT prompt engineering
   - Optimize database queries
   - Enhance real-time updates

3. Feature Development

   - Expand patron interaction system
   - Implement inventory management
   - Develop event consequence system

## Active Decisions

1. Architecture

   - Service-oriented design for maintainability
   - Heavy use of AI for content generation
   - Real-time updates for game state

2. Technical Choices

   - Rails 7 for full-stack capabilities
   - Hotwire for dynamic updates
   - PostgreSQL for complex relationships

3. Development Focus

   - Prioritizing core game mechanics
   - Emphasis on AI integration
   - Building maintainable architecture
